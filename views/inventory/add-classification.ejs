<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Classification</title>
    <link rel="stylesheet" href="/css/style.css">

    <script>
        // Client-side validation: no spaces or special characters
        function validateClassification() {
            const input = document.getElementById("classification_name");
            const value = input.value;
            const error = document.getElementById("nameError");

            const regex = /^[A-Za-z0-9]+$/; // only letters and numbers

            if (!regex.test(value)) {
                error.textContent =
                    "Classification name cannot contain spaces or special characters.";
                return false;
            }

            error.textContent = "";
            return true;
        }
    </script>

</head>

<body>
    <main class="form-page">
        <h1>Add New Classification</h1>

        <!-- Flash Messages -->
        <% if (messages && messages.length> 0) { %>
            <div class="flash-message">
                <% messages.forEach(msg=> { %>
                    <p>
                        <%= msg %>
                    </p>
                    <% }) %>
            </div>
            <% } %>

                <!-- Server-side validation errors -->
                <% if (errors) { %>
                    <ul class="error-list">
                        <% errors.forEach(error=> { %>
                            <li>
                                <%= error.msg %>
                            </li>
                            <% }) %>
                    </ul>
                    <% } %>

                        <form action="/inv/add-classification" method="POST"
                            onsubmit="return validateClassification();">

                            <label for="classification_name">Classification Name</label>
                            <input type="text" id="classification_name" name="classification_name" required
                                value="<%= classification_name ? classification_name : '' %>">
                            <span id="nameError" class="error"></span>

                            <button type="submit">Add Classification</button>
                        </form>

    </main>
</body>

</html>